(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function l(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerpolicy&&(f.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?f.credentials="include":a.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(a){if(a.ep)return;a.ep=!0;const f=l(a);fetch(a.href,f)}})();/*! modernizr 3.11.2 (Custom Build) | MIT *
 * https://modernizr.com/download/?-cssanimations-csscolumns-customelements-flexbox-history-picture-pointerevents-postmessage-sizes-srcset-webgl-websockets-webworkers-addtest-domprefixes-hasevent-mq-prefixedcssvalue-prefixes-setclasses-testallprops-testprop-teststyles !*/(function(t,o,l,d){function a(e,n){return typeof e===n}function f(e){var n=T.className,r=c._config.classPrefix||"";if(Q&&(n=n.baseVal),c._config.enableJSClass){var i=new RegExp("(^|\\s)"+r+"no-js(\\s|$)");n=n.replace(i,"$1"+r+"js$2")}c._config.enableClasses&&(e.length>0&&(n+=" "+r+e.join(" "+r)),Q?T.className.baseVal=n:T.className=n)}function m(e,n){if(typeof e=="object")for(var r in e)be(e,r)&&m(r,e[r]);else{e=e.toLowerCase();var i=e.split("."),s=c[i[0]];if(i.length===2&&(s=s[i[1]]),s!==void 0)return c;n=typeof n=="function"?n():n,i.length===1?c[i[0]]=n:(!c[i[0]]||c[i[0]]instanceof Boolean||(c[i[0]]=new Boolean(c[i[0]])),c[i[0]][i[1]]=n),f([(n&&n!==!1?"":"no-")+i.join("-")]),c._trigger(e,n)}return c}function u(){return typeof l.createElement!="function"?l.createElement(arguments[0]):Q?l.createElementNS.call(l,"http://www.w3.org/2000/svg",arguments[0]):l.createElement.apply(l,arguments)}function V(){var e=l.body;return e||(e=u(Q?"svg":"body"),e.fake=!0),e}function L(e,n,r,i){var s,y,p,I,$="modernizr",v=u("div"),h=V();if(parseInt(r,10))for(;r--;)p=u("div"),p.id=i?i[r]:$+(r+1),v.appendChild(p);return s=u("style"),s.type="text/css",s.id="s"+$,(h.fake?h:v).appendChild(s),h.appendChild(v),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(l.createTextNode(e)),v.id=$,h.fake&&(h.style.background="",h.style.overflow="hidden",I=T.style.overflow,T.style.overflow="hidden",T.appendChild(h)),y=n(v,e),h.fake?(h.parentNode.removeChild(h),T.style.overflow=I,T.offsetHeight):v.parentNode.removeChild(v),!!y}function R(e,n,r){var i;if("getComputedStyle"in o){i=getComputedStyle.call(o,e,n);var s=o.console;if(i!==null)r&&(i=i.getPropertyValue(r));else if(s){var y=s.error?"error":"log";s[y].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else i=!n&&e.currentStyle&&e.currentStyle[r];return i}function pe(e,n){return!!~(""+e).indexOf(n)}function Y(e){return e.replace(/([A-Z])/g,function(n,r){return"-"+r.toLowerCase()}).replace(/^ms-/,"-ms-")}function S(e,n){var r=e.length;if("CSS"in o&&"supports"in o.CSS){for(;r--;)if(o.CSS.supports(Y(e[r]),n))return!0;return!1}if("CSSSupportsRule"in o){for(var i=[];r--;)i.push("("+Y(e[r])+":"+n+")");return i=i.join(" or "),L("@supports ("+i+") { #modernizr { position: absolute; } }",function(s){return R(s,null,"position")==="absolute"})}return d}function X(e){return e.replace(/([a-z])-([a-z])/g,function(n,r,i){return r+i.toUpperCase()}).replace(/^-/,"")}function ee(e,n,r,i){function s(){p&&(delete E.style,delete E.modElem)}if(i=!a(i,"undefined")&&i,!a(r,"undefined")){var y=S(e,r);if(!a(y,"undefined"))return y}for(var p,I,$,v,h,Ce=["modernizr","tspan","samp"];!E.style&&Ce.length;)p=!0,E.modElem=u(Ce.shift()),E.style=E.modElem.style;for($=e.length,I=0;I<$;I++)if(v=e[I],h=E.style[v],pe(v,"-")&&(v=X(v)),E.style[v]!==d){if(i||a(r,"undefined"))return s(),n!=="pfx"||v;try{E.style[v]=r}catch{}if(E.style[v]!==h)return s(),n!=="pfx"||v}return s(),!1}function ze(e,n){return function(){return e.apply(n,arguments)}}function Oe(e,n,r){var i;for(var s in e)if(e[s]in n)return r===!1?e[s]:(i=n[e[s]],a(i,"function")?ze(i,r||n):i);return!1}function ge(e,n,r,i,s){var y=e.charAt(0).toUpperCase()+e.slice(1),p=(e+" "+ke.join(y+" ")+y).split(" ");return a(n,"string")||a(n,"undefined")?ee(p,n,i,s):(p=(e+" "+G.join(y+" ")+y).split(" "),Oe(p,n,r))}function j(e,n,r){return ge(e,d,d,n,r)}var H=[],g={_version:"3.11.2",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var r=this;setTimeout(function(){n(r[e])},0)},addTest:function(e,n,r){H.push({name:e,fn:n,options:r})},addAsyncTest:function(e){H.push({name:null,fn:e})}},c=function(){};c.prototype=g,c=new c;var ye=[],T=l.documentElement,Q=T.nodeName.toLowerCase()==="svg",ve="Moz O ms Webkit",G=g._config.usePrefixes?ve.toLowerCase().split(" "):[];g._domPrefixes=G;var Fe=g._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];g._prefixes=Fe;var be;(function(){var e={}.hasOwnProperty;be=a(e,"undefined")||a(e.call,"undefined")?function(n,r){return r in n&&a(n.constructor.prototype[r],"undefined")}:function(n,r){return e.call(n,r)}})(),g._l={},g.on=function(e,n){this._l[e]||(this._l[e]=[]),this._l[e].push(n),c.hasOwnProperty(e)&&setTimeout(function(){c._trigger(e,c[e])},0)},g._trigger=function(e,n){if(this._l[e]){var r=this._l[e];setTimeout(function(){var i;for(i=0;i<r.length;i++)(0,r[i])(n)},0),delete this._l[e]}},c._q.push(function(){g.addTest=m});var he=function(){function e(r,i){var s;return!!r&&(i&&typeof i!="string"||(i=u(i||"div")),r="on"+r,s=r in i,!s&&n&&(i.setAttribute||(i=u("div")),i.setAttribute(r,""),s=typeof i[r]=="function",i[r]!==d&&(i[r]=d),i.removeAttribute(r)),s)}var n=!("onblur"in T);return e}();g.hasEvent=he;var Re=function(){var e=o.matchMedia||o.msMatchMedia;return e?function(n){var r=e(n);return r&&r.matches||!1}:function(n){var r=!1;return L("@media "+n+" { #modernizr { position: absolute; } }",function(i){r=R(i,null,"position")==="absolute"}),r}}();g.mq=Re;var He=function(e,n){var r=!1,i=u("div"),s=i.style;if(e in s){var y=G.length;for(s[e]=n,r=s[e];y--&&!r;)s[e]="-"+G[y]+"-"+n,r=s[e]}return r===""&&(r=!1),r};g.prefixedCSSValue=He;var ke=g._config.usePrefixes?ve.split(" "):[];g._cssomPrefixes=ke;var Ae={elem:u("modernizr")};c._q.push(function(){delete Ae.elem});var E={style:Ae.elem.style};c._q.unshift(function(){delete E.style}),g.testAllProps=ge,g.testAllProps=j,g.testProp=function(e,n,r){return ee([e],d,n,r)},g.testStyles=L,c.addTest("customelements","customElements"in o),c.addTest("history",function(){var e=navigator.userAgent;return!!e&&(e.indexOf("Android 2.")===-1&&e.indexOf("Android 4.0")===-1||e.indexOf("Mobile Safari")===-1||e.indexOf("Chrome")!==-1||e.indexOf("Windows Phone")!==-1||location.protocol==="file:")&&o.history&&"pushState"in o.history});var te=[""].concat(G);g._domPrefixesAll=te,c.addTest("pointerevents",function(){for(var e=0,n=te.length;e<n;e++)if(he(te[e]+"pointerdown"))return!0;return!1});var Se=!0;try{o.postMessage({toString:function(){Se=!1}},"*")}catch{}c.addTest("postmessage",new Boolean("postMessage"in o)),c.addTest("postmessage.structuredclones",Se),c.addTest("webgl",function(){return"WebGLRenderingContext"in o});var _e=!1;try{_e="WebSocket"in o&&o.WebSocket.CLOSING===2}catch{}c.addTest("websockets",_e),c.addTest("cssanimations",j("animationName","a",!0)),function(){c.addTest("csscolumns",function(){var s=!1,y=j("columnCount");try{s=!!y,s&&(s=new Boolean(s))}catch{}return s});for(var e,n,r=["Width","Span","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","BreakBefore","BreakAfter","BreakInside"],i=0;i<r.length;i++)e=r[i].toLowerCase(),n=j("column"+r[i]),e!=="breakbefore"&&e!=="breakafter"&&e!=="breakinside"||(n=n||j(r[i])),c.addTest("csscolumns."+e,n)}(),c.addTest("flexbox",j("flexBasis","1px",!0)),c.addTest("picture","HTMLPictureElement"in o),c.addAsyncTest(function(){var e,n,r,i=u("img"),s="sizes"in i;!s&&"srcset"in i?(n="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",r=function(){m("sizes",i.width===2)},i.onload=r,i.onerror=r,i.setAttribute("sizes","9px"),i.srcset=e+" 1w,"+n+" 8w",i.src=e):m("sizes",s)}),c.addTest("srcset","srcset"in u("img")),c.addTest("webworkers","Worker"in o),function(){var e,n,r,i,s,y,p;for(var I in H)if(H.hasOwnProperty(I)){if(e=[],n=H[I],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(r=0;r<n.options.aliases.length;r++)e.push(n.options.aliases[r].toLowerCase());for(i=a(n.fn,"function")?n.fn():n.fn,s=0;s<e.length;s++)y=e[s],p=y.split("."),p.length===1?c[p[0]]=i:(c[p[0]]&&(!c[p[0]]||c[p[0]]instanceof Boolean)||(c[p[0]]=new Boolean(c[p[0]])),c[p[0]][p[1]]=i),ye.push((i?"":"no-")+p.join("-"))}}(),f(ye),delete g.addTest,delete g.addAsyncTest;for(var ne=0;ne<c._q.length;ne++)c._q[ne]();t.Modernizr=c})(window,window,document);const b=[{id:1,name:"Chokladmunk med vaniljfyllning",price:23,categories:["glazed","filled"],images:["img/chocolate-iced-custard-filled.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:5,discount:!1},{id:2,name:"Chokladmunk",price:18,categories:["glazed"],images:["img/chocolate-iced-glazed.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:4.5,discount:!1},{id:3,name:"Kanelpudrad munk med \xE4ppelfyllning",price:25,categories:["filled","sprinkles"],images:["img/cinnamon-apple-filled.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:4.5,discount:!1},{id:4,name:"Glaserad kanelmunk",price:13,categories:["glazed","sprinkles"],images:["img/glazed-cinnamon.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:5,discount:!1},{id:5,name:"Glaserad munk med citronfyllning",price:23,categories:["glazed","filled"],images:["img/glazed-lemon-filled.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:4,discount:!1},{id:6,name:"Munk med chokladfyllning",price:16,categories:["filled"],images:["img/original-filled-chocolate-kreme\u2122.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:4,discount:!1},{id:7,name:"Glaserad munk",price:7,categories:["glazed"],images:["img/original-glazed-doughnut.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:5,discount:!1},{id:8,name:"Pudrad munk med bl\xE5b\xE4rsfyllning",price:25,categories:["sprinkles","filled"],images:["img/powdered-blueberry-filled.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:4.5,discount:!1},{id:9,name:"Pudrad munk med jordgubbsfyllning",price:25,categories:["sprinkles","filled"],images:["img/powdered-strawberry-filled.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:4,discount:!1},{id:10,name:"Jordgubbsmunk",price:11,categories:["glazed"],images:["img/strawberry-iced.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:5,discount:!1}],Ge=new Set,J=new Set;let _=[...b];const Ee=[{id:11,name:"Luciamunk",price:1,categories:["sprinkles","filled"],images:["img/chocolate-iced-custard-filled.jpeg","img/chocolate-iced-custard-filled.jpeg"],rating:5}],O=new Date,P=O.getDay(),N=O.getHours(),Be=O.getMonth(),Ne=O.getDate(),Ue=()=>{if(Be===11&&Ne===24){document.body.style.backgroundImage="url('/img/christmasbg.webp')",document.body.style.backgroundSize="cover",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundAttachment="fixed";const t=document.querySelectorAll(".donuts__item_info p:first-child");for(let o=0;o<t.length;++o)t[o].style.color="red"}},We=()=>{if(P>=5&&N>=15||P===6||P===1&&N<=3)for(const t of b)t.price=Math.round(t.price*1.15)};We();const A=[],Ke=0,F=document.querySelector(".donuts");let qe=F.querySelectorAll(".donuts__item_quantity > button"),we=F.querySelectorAll(".donuts__item_addcart");const Ve=()=>{qe=F.querySelectorAll(".donuts__item_quantity > button"),we=F.querySelectorAll(".donuts__item_addcart");for(const t of qe)t.getAttribute("data-type")==="decrease"?t.addEventListener("click",()=>{Je(t.getAttribute("data-id"))}):t.getAttribute("data-type")==="increase"&&t.addEventListener("click",()=>{Qe(t.getAttribute("data-id"))});for(const t of we)t.addEventListener("click",()=>{Ze(t.getAttribute("data-id"))})},le=()=>{const t=A.reduce((a,f)=>a+f.totPrice,0),o=A.reduce((a,f)=>a+f.count,0),l=document.querySelector("#cart-counter"),d=o;l.textContent=d,Ye(t,o)},Qe=t=>{const o=document.querySelector(`[data-id="${t}"]`),l=o.querySelector(".donuts__item_quantity input");let d=Number(l.value)+1;const a=Number(t),f=b.find(u=>u.id===a);d>99&&(d=99),l.value=d,o.querySelector(".donuts__item_addcart span").innerText=f.price*d;const m=f.price*d>=0?f.price*d:f.price;o.querySelector(".donuts__item_addcart span").innerText=m;for(const u of A)u.id===t&&u.count>0&&(u.count-=1,u.totPrice=u.count*u.price,console.log(A),ue())},Je=t=>{const o=document.querySelector(`[data-id="${t}"]`),l=o.querySelector(".donuts__item_quantity input"),d=Number(l.value)-1,a=Number(t),f=b.find(u=>u.id===a);l.value>0&&(l.value=d,o.querySelector(".donuts__item_addcart span").innerText=f.price*d);const m=f.price*d>=0?f.price*d:f.price;o.querySelector(".donuts__item_addcart span").innerText=m;for(const u of A)u.id===t&&u.count>0&&(u.count-=1,u.totPrice=u.count*u.price,console.log(A),ue())},Ze=t=>{const o=Number(t),l=Number(document.querySelector(`[data-id="${t}"] .donuts__item_quantity input`).value);if(l>0){const d=b.find(m=>m.id===o),a=d.price*l;if(document.querySelector(`[data-id="${t}"] .donuts__item_quantity input`).value="0",Ke+a>2e3){alert("Du kan inte best\xE4lla f\xF6r mer \xE4n 2000kr");return}if(A.find(m=>m.id===o))for(const m of A)m.count+=l,m.totPrice+=a;else A.push({...d,count:l,totPrice:a});le(),ue()}},ue=()=>{let t="";for(const o of A){console.log(o);const l=`
			<li data-id="cart-${o.id}">
				<div className="name">
					<img src=${o.images[1]} width="30" height="30"/>
					<p>${o.name}</p>
				</div>
				<div className="donuts__item_quantity">
					<button 
						class="button button--background"
						onClick="updateCartQuantity('cart-${o.id}', 'dec')"
					>-</button>
					<input type="number" value="${o.count}" data-id="cart-${o.id}"/>
					<button 
						class="button button--background" 
						onClick="updateCartQuantity('cart-${o.id}', 'inc')"
					>+</button>
					<p>${o.totPrice} kr</p>
				</div>
			</li>`;t+=l}document.querySelector("#cart article ul").innerHTML=t,le()},Ye=(t,o)=>{const l=Math.round(25+t*.1),d=document.getElementById("freight-sum"),a=document.getElementById("cart-sum"),f=document.getElementById("delivery-time"),m=document.querySelector('[name="discount-code"]');m.addEventListener("keyup",le);let u=t+l;const V=new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(l),L=new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format(u);a.textContent=`Totalpris: ${L}.`,d.textContent=`Frakt: ${V}.`,f.textContent="Best\xE4llningen skickas 30 minuter efter orderl\xE4ggning.",t>=800?document.getElementById("invoice-radio").disabled=!0:document.getElementById("invoice-radio").disabled=!1;const R={month:11,date:13};Be===R.month&&Ne===R.date&&A.length>=1&&(A.push(...Ee),Ee.pop()),P===1&&N<=10?(u=Math.round(L*.9),a.textContent=`Totalpris: M\xE5ndagsrabatt: 10 % p\xE5 hela best\xE4llningen ${L}.`):a.textContent=`Totalpris: ${L}.`,o>=15?(u=t,a.textContent=`Totalpris: ${L}.`,d.textContent="Fraktfritt."):(u=t+l,d.textContent=`Frakt: ${V}.`),m.value==="a_damn_fine-cup_of-coffee"?(u=0,a.textContent="Din best\xE4llning \xE4r kostnadsfri!",d.textContent="Fraktfritt."):u=t+l,(P===6||P===0)&&(f.textContent="Best\xE4llningen skickas 90 minuter efter orderl\xE4ggning."),(P!==6||P!==0&&N>=0&&N<=5)&&(f.textContent="Best\xE4llningen skickas 45 minuter efter orderl\xE4ggning."),P===5&&N>=11&&N<=13&&(f.textContent="Leveranstiden \xE4r ber\xE4knad till 15:00"),(()=>{const S=new Date(O.getFullYear(),0,1),X=Math.floor((O-S)/(24*60*60*1e3));Math.ceil(X/7)%2===0&&P===5&&u>=25&&(u-=25,a.textContent=`Totalpris efter 25 kr rabatt: ${L}.`)})(),(()=>{for(const S of A)S.count>=10&&S.discount===!1?(S.totPrice=Math.round(S.totPrice*.9),S.discount=!0):S.count<10&&S.discount===!0&&(S.discount=!1)})()},Xe=t=>{const o='<i class="fa-solid fa-star"></i>',l='<i class="fa-solid fa-star-half"></i>',d=t.toString().split("."),a=d[0],f=d.length>1?d[1]:0;let m="";for(let u=0;u<Number(a);u++)m+=o;return f&&(m+=l),m},B=()=>{F.innerHTML="";for(const t of _)F.innerHTML+=`
      <article class="donuts__item" data-id=${t.id}>
        <h2>${t.name}</h2>
				<div class="donuts__item_image">
					<button id ="prev-${t.id}" class="prev">&#10094;</button>
					<img id = "img-${t.id}" src="${t.images[0]}" alt="A picture of a donut"/>
					<button id ="next-${t.id}" class="next">&#10095;</button>
				</div>
				<div class="donuts__item_info">
					<p>${t.price} kr</p>
					<p>${Xe(t.rating)}</p>
				</div>
        <div class="donuts__item_quantity">
          <button 
						class="button button--background" 
						data-id=${t.id}
						data-type='decrease'
					><i class="fa-solid fa-minus" title="Decrease count"></i></button>
          <input type="number" value="0"  min="0" max="99" oninput="this.value = !!this.value && Math.abs(this.value)
          >= 0 ? Math.abs(this.value) : null"/> <!--No negative number or letters allowed-->
          <button 
						class="button button--background" 
						data-id=${t.id}
						data-type='increase'
					><i class="fa-solid fa-plus" title="Increase count"></i></button>
        </div>
        <button 
					class="donuts__item_addcart button button--background" 
					data-id=${t.id}
				>L\xE4gg till f\xF6r <span>${t.price}</span> kr</button>
      </article>
    `;Ve()},et=()=>{for(const t of b)for(const o of t.categories)Ge.add(o)};function tt(t){const o=t.currentTarget.id.replace("prev-",""),l=document.querySelector(`#img-${o}`);l.getAttribute("src")===b[o].images[0]?l.setAttribute("src",b[o].images[1]):l.setAttribute("src",b[o].images[0])}function nt(t){const o=t.currentTarget.id.replace("next-",""),l=document.querySelector(`#img-${o}`);l.getAttribute("src")===b[o].images[0]?l.setAttribute("src",b[o].images[1]):l.setAttribute("src",b[o].images[0])}const rt=document.querySelectorAll("button.prev"),ot=document.querySelectorAll("button.next");rt.forEach(t=>{t.addEventListener("click",tt)});ot.forEach(t=>{t.addEventListener("click",nt)});const xe=document.querySelector("form"),Le=document.querySelector('[name="name"]'),re=document.querySelector('[name="address"]'),Te=document.querySelector('[name="post-code"]'),Z=document.querySelector('[name="city"]'),it=document.querySelector('[name="tel"]'),st=document.querySelector('[name="email"]'),M=document.querySelector('[name="card-number"]'),U=document.querySelector('[name="date"]'),W=document.querySelector('[name="cvc"]'),z=document.querySelector('[name="social-security-number"]'),at=document.querySelector("#card-radio"),ct=document.querySelector("#invoice-radio"),lt=Array.from(document.querySelectorAll('[name="payment-method"]')),Ie=document.querySelector('[name="personal-data"]'),Pe=document.querySelector("#order-btn"),oe=document.querySelector("#card-payment-form"),ie=document.querySelector("#invoice-payment-form"),k={name:!1,address:!1,postCode:!1,city:!1,tel:!1,email:!1,payment:!1,personalData:!1},K={cardNumber:!1,expirationDate:!1,cvc:!1},ut=t=>{for(const o in t)if(!t[o])return!1;return!0},dt=()=>{if(at.checked){for(const t in K)if(!K[t]){k.payment=!1;return}k.payment=!0}else if(ct.checked){if(z.value===""){k.payment=!1;return}k.payment=!0}},C=()=>{dt(),ut(k)?(Pe.removeAttribute("disabled"),xe.setAttribute("onsubmit","submitOrder()")):(Pe.setAttribute("disabled",""),xe.removeAttribute("onsubmit"))};Le.addEventListener("keyup",()=>{k.name=Le.value.indexOf(" ")>0,C()});re.addEventListener("keyup",()=>{k.address=/\d/.test(re.value)?/[A-Za-zÅåÄäÖö]/.test(re.value):!1,C()});Te.addEventListener("keyup",()=>{k.postCode=Te.value.length===5,C()});Z.addEventListener("keyup",()=>{k.city=Z.value!=="",C()});it.addEventListener("keyup",()=>{k.tel=Z.value!=="",C()});st.addEventListener("keyup",()=>{k.email=Z.value!=="",C()});for(const t of lt)t.addEventListener("click",()=>{switch(C(),t.value){case"card":oe.style.display="flex",ie.style.display="none",M.setAttribute("required",""),U.setAttribute("required",""),W.setAttribute("required",""),z.removeAttribute("required");break;case"invoice":oe.style.display="none",ie.style.display="flex",z.setAttribute("required",""),M.removeAttribute("required"),U.removeAttribute("required"),W.removeAttribute("required");break;default:oe.style.display="flex",ie.style.display="none",M.setAttribute("required",""),U.setAttribute("required",""),W.setAttribute("required",""),z.removeAttribute("required")}});M.addEventListener("keyup",()=>{K.cardNumber=/\d/.test(M.value),console.log(/\d/.test(M.value)),C()});U.addEventListener("keyup",()=>{K.expirationDate=U.value!=="",C()});W.addEventListener("keyup",()=>{K.cvc=W.value!=="",C()});z.addEventListener("keyup",()=>{k.payment=/\d/.test(z.value),C()});Ie.addEventListener("click",()=>{k.personalData=Ie.checked,C()});document.querySelector("form").addEventListener("reset",t=>{confirm("\xC4r du s\xE4ker att du vill \xE5terst\xE4lla formul\xE4ret?")&&(t.preventDefault(),St())});const se=document.querySelector("#filterMenuButton"),ft=document.querySelector("#filterMenuResetButton"),D=document.querySelector("#filterMenu"),ce=document.querySelector('[name="searchQuery"]'),mt=document.querySelector("#searchButton");let ae=!1;const je=t=>{t&&t!==""&&(_=b.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())),B())};se.addEventListener("click",()=>{se.setAttribute("aria-expanded",!ae),ae=JSON.parse(se.getAttribute("aria-expanded")),ae?(D.style.display="flex",window.setTimeout(()=>{D.style.opacity=1,D.style.transform="scale(1)"},0)):(D.style.opacity=0,D.style.transform="scale(0)",window.setTimeout(()=>{D.style.display="none"},200))});ft.addEventListener("click",()=>{_=[...b],B()});mt.addEventListener("click",()=>{je(ce.value)});document.addEventListener("keydown",t=>{t.key==="Enter"&&document.activeElement===ce&&je(ce.value)});const pt=t=>{J.has(t)?J.delete(t):J.add(t),_=[];for(const o of b)for(const l of o.categories)J.has(l)&&!_.find(d=>d.id===o.id)&&_.push(o);B()},gt=document.querySelectorAll(".navbar__dropdown_item_categories input");for(const t of gt)t.addEventListener("click",o=>pt(o.target.name));const q=document.querySelector("#price-sort"),w=document.querySelector("#rating-sort"),x=document.querySelector("#name-sort");q.style.transform="scale(-1, 1)";w.style.transform="scale(-1, 1)";x.style.transform="scale(-1, 1)";q.addEventListener("click",me);w.addEventListener("click",fe);x.addEventListener("click",de);const yt=(t,o)=>(x.removeEventListener("click",de),x.addEventListener("click",$e),t.name<o.name?-1:1);function de(){_.sort(yt),B(),x.style.transition="0.6s ease",x.style.transform="rotate(-0.5turn)"}const vt=(t,o)=>(x.removeEventListener("click",$e),x.addEventListener("click",de),t.name<o.name?1:-1);function $e(){_.sort(vt),B(),x.style.transition="0.6s ease",x.style.transform="scale(-1, 1)",x.style.transform="rotate(deg0)"}const bt=(t,o)=>(w.removeEventListener("click",fe),w.addEventListener("click",De),t.rating<o.rating?-1:1);function fe(){_.sort(bt),B(),w.style.transition="0.6s ease",w.style.transform="rotate(-0.5turn)"}const ht=(t,o)=>(w.removeEventListener("click",De),w.addEventListener("click",fe),t.rating<o.rating?1:-1);function De(){_.sort(ht),B(),w.style.transition="0.6s ease",w.style.transform="scale(-1, 1)",w.style.transform="rotate(deg0)"}const kt=(t,o)=>(q.removeEventListener("click",me),q.addEventListener("click",Me),t.price<o.price?-1:1);function me(){_.sort(kt),B(),q.style.transition="0.6s ease",q.style.transform="rotate(-0.5turn)"}const At=(t,o)=>(q.removeEventListener("click",Me),q.addEventListener("click",me),t.price<o.price?1:-1);function Me(){_.sort(At),B(),q.style.transition="0.6s ease",q.style.transform="scale(-1, 1)",q.style.transform="rotate(deg0)"}const St=()=>{window.location.reload()};B();et();Ue();
